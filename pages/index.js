import React, { useEffect } from 'react';
import Head from 'next/head';
import HomeSection from '../components/Home/HomeSection';
import AboutUs from '../components/AboutUs/AboutUs';
import LoadingPage from '../components/LoadingPage/LoadingPage';
import SideBar from '../components/Layout/SideBar/SideBar';
import Footer from '../components/Layout/Footer';
import MeetOurTeam from '../components/MeetOurTeam/MeetOurTeam';
import ProjectsAndAwards from '../components/ProjectsAndAwards/ProjectsAndAwards';
export default function Home() {
    function handleLoad() {
        document.body.style.height = '100vh'; // ensures you cant scroll past loading page
        document.body.style.overflowY = 'hidden';
    }

    useEffect(() => {
        window.addEventListener('load', handleLoad, false);
        const intervalID = setInterval(() => {
            let counter = 0;
            if (counter > 0) {
                clearInterval(intervalID);
            }
            if (
                document.querySelector('#loading-page').style.display == 'none'
            ) {
                document.body.style.removeProperty('height');
                document.body.style.removeProperty('overflow-y');
            }
        }, 3200);
    }, []);

    return (
        <div>
            <Head>
                <title>CHAP website</title>
                <meta
                    name="description"
                    content="Generated by create next app"
                />
                <link rel="icon" href="/favicon.ico" />
            </Head>

            <LoadingPage />
            <main className="pageMargin">
                <SideBar />
                <HomeSection />
                <AboutUs />
                <MeetOurTeam />
                <ProjectsAndAwards />
                <Footer />
            </main>
        </div>
    );
}
